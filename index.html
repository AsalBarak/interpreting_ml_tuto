
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Understanding and diagnosing your machine-learning models &#8212; Tutorial</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'may 2018',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. Measuring how well a model predicts" href="content/01_how_well/index.html" />
   
    <link rel="stylesheet"
	  href="https://unpkg.com/purecss@1.0.0/build/base-min.css">

<script type="text/javascript">
$(function () {
    // Highlight the table of content as we scroll
    sections = {},
    i        = 0,
    url	 = document.URL.replace(/#.*$/, ""),
    current_section = 0;

    // Grab positions of our sections
    $('.headerlink').each(function(){
        sections[this.href.replace(url, '')] = $(this).offset().top - 50;
    });

    $(window).scroll(function(event) {
	var pos   = $(window).scrollTop();

	// Highlight the current section
	$('a.internal').parent().removeClass('active');
        for(i in sections){
            if(sections[i] > pos){
		break;
            };
	    if($('a.internal[href$="' + i + '"]').is(':visible')){
		current_section = i;
	    };
        }
	$('a.internal[href$="' + current_section + '"]').parent().addClass('active');
	$('a.internal[href$="' + current_section + '"]').parent().parent().parent().addClass('active');
	$('a.internal[href$="' + current_section + '"]').parent().parent().parent().parent().parent().addClass('active');
    });

});
</script>


  </head>
  <body>
   <!-- Use the header to add javascript -->
    

    <script type="text/javascript">
    // Function to collapse the tip divs
    function collapse_tip_div(obj){
	// Update the representation on the tip div based on whether it
	// has the 'collapsed' css class or not: we only want to
	// collapse divs that are not already collapsed
	if($(obj).hasClass("collapsed")) {
	} else {
	    $(obj).find("p.summary").remove();
	    var content = $(obj).text();
	    var html = $(obj).html();

	    if(content.length > 40) {
		if ($.browser.msie) {
		    // We start at '3' to avoid 'tip', as IE
		    // does not count whitespace
		    var content = content.substr(3, 50);
		} else {
		    // We start at '5' to avoid 'tip '
		    var content = content.substr(5, 50);
		}
	    }
	    $(obj).html('<p class="summary"><img src="_static/plus.png">' + content + '...</p>' + html);
	}
    }
    </script>

    <script type="text/javascript">
    $(function () {
	$(".tip")
	    .click(function(event){
		$(this).toggleClass("collapsed");
		// Change state of the global button
		$('div.related li.transparent').removeClass('transparent')
		$(this).find("p.summary").remove();
		if($(this).hasClass("collapsed")) {
		    var content = $(this).text();
		    var html = $(this).html();

		    if(content.length > 40) {
			if ($.browser.msie) {
			    // We start at '3' to avoid 'tip', as IE
			    // does not count whitespace
			    var content = content.substr(3, 50);
			} else {
			    // We start at '5' to avoid 'tip '
			    var content = content.substr(5, 50);
			}
		    }
		    $(this).html('<p class="summary"><img src="_static/plus.png">' + content + '...</p>' + html);
		}
		if (event.target.tagName.toLowerCase() != "a") {
                   return true; //Makes links clickable
		}
	});
    });
    </script>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="content/01_how_well/index.html" title="1. Measuring how well a model predicts"
             accesskey="N">next</a></li>
        <li class="nav-item nav-item-0"><a href="#">Tutorial</a> &#187;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="understanding-and-diagnosing-your-machine-learning-models">
<h1>Understanding and diagnosing your machine-learning models<a class="headerlink" href="#understanding-and-diagnosing-your-machine-learning-models" title="Permalink to this headline">Â¶</a></h1>
<p>Achieving a good prediction is often only half of the job. Questions
immediately arise: How to improve this prediction? What drives the
prediction? Can we operate changes to the system based on the
predictions? All these questions require understanding how good is the
model prediction, and how do the model predict.</p>
<p>This tutorial assumes basic knowledge of scikit-learn. It will focus on
statistics, tests, and interpretation rather than improving the
prediction.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
 <SCRIPT>
 //Function to make the index toctree collapsible
 $(function () {
     $('.toctree-l2')
         .click(function(event){
             if (event.target.tagName.toLowerCase() != "a") {
                 if ($(this).children('ul').length > 0) {
                      $(this).attr('data-content',
                          (!$(this).children('ul').is(':hidden')) ? '\u25ba' : '\u25bc');
                     $(this).children('ul').toggle();
                 }
                 return true; //Makes links clickable
             }
         })
         .mousedown(function(event){ return false; }) //Firefox highlighting fix
         .children('ul').hide();
     // Initialize the values
     $('li.toctree-l2:not(:has(ul))').attr('data-content', '-');
     $('li.toctree-l2:has(ul)').attr('data-content', '\u25ba');
     $('li.toctree-l2:has(ul)').css('cursor', 'pointer');

     $('.toctree-l2').hover(
         function () {
             if ($(this).children('ul').length > 0) {
                 $(this).css('background-color', '#D0D0D0').children('ul').css('background-color', '#F0F0F0');
                 $(this).attr('data-content',
                     (!$(this).children('ul').is(':hidden')) ? '\u25bc' : '\u25ba');
             }
             else {
                 $(this).css('background-color', '#F9F9F9');
             }
         },
         function () {
             $(this).css('background-color', 'white').children('ul').css('background-color', 'white');
             if ($(this).children('ul').length > 0) {
                 $(this).attr('data-content',
                     (!$(this).children('ul').is(':hidden')) ? '\u25bc' : '\u25ba');
             }
         }
     );
 });

 </SCRIPT>

<style type="text/css">
  div.bodywrapper blockquote {
      margin: 0 ;
  }

  div.toctree-wrapper ul {
      margin: 0 ;
      padding-left: 0px ;
  }

  div.tune li, div.tune ul {
      transition-duration: 0.2s;
  }

  div.tune li.toctree-l1 {
      padding: 5px 0 0;
      list-style-type: none;
      font-size: 150% ;
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      font-weight: normal;
      color: #20435c;
      margin-left: 0;
      margin-bottom: 1.2em;
      font-weight: bold;
      }

  div.tune li.toctree-l1 a {
      padding: 0 0 0 10px ;
      color: #314F64 ;
  }

  div.tune li.toctree-l2 {
      padding: 0.25em 0 0.25em 0 ;
      list-style-type: none;
      background-color: #FFFFFF;
      font-size: 85% ;
      font-weight: normal;
  }

  div.tune li.toctree-l2 ul {
      padding-left: 40px ;
  }


  div.tune li.toctree-l2:before {
      content: attr(data-content) ;
      font-size: 85% ;
      color: #777 ;
      display: inline-block;
      width: 10px;
  }

  div.tune li.toctree-l3 {
      font-size: 75% ;
      list-style-type: square;
      font-weight: normal;
  }

  div.tune li.toctree-l4 {
      font-size: 85% ;
      list-style-type: circle;
      font-weight: normal;
  }

  div.preface li.toctree-l1 {
      font-weight: bold;
      background-color: transparent;
      margin-bottom: 0;
      margin-left: 0;
      margin-top: 10px;
      display: inline;
  }

  div.preface li.toctree-l2 {
      background-color: transparent;
      margin-bottom: 0;
      margin-left: 1.5em;
      display: inline;
  }

  div.sidebar {
      width: 25ex ;
  }

  @media      only screen and (max-width: 1080px) and (-webkit-min-device-pixel-ratio: 2.5), (max-width: 70ex) {
      div.sidebar {
          width: 79%;
          padding-left: 5%;
          font-size: 80%;
          margin-left: auto;
          margin-right: 1px;
      }
  }

@media (max-width: 1324px) {
      div.sphinxsidebar {
          display: none;
      }
}

</style><div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="content/01_how_well/index.html">1. Measuring how well a model predicts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="content/01_how_well/01_metrics.html">1.1. Metrics to judge the sucess of a model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/01_metrics.html#regression-settings">1.1.1. Regression settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#the-boston-housing-data">1.1.1.1. The Boston housing data</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#explained-variance-vs-mean-square-error">1.1.1.2. Explained variance vs Mean Square Error</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#mean-squared-error-versus-mean-absolute-error">1.1.1.3. Mean Squared Error versus Mean Absolute Error</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#summary">1.1.1.4. Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/01_metrics.html#classification-settings">1.1.2. Classification settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#the-digits-data">1.1.2.1. The digits data</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#accuracy-and-its-shortcomings">1.1.2.2. Accuracy and its shortcomings</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#precision-recall-and-their-shortcomings">1.1.2.3. Precision, recall, and their shortcomings</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#area-under-the-roc-curve">1.1.2.4. Area under the ROC curve</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#average-precision">1.1.2.5. Average precision</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#multiclass-and-multilabel-settings">1.1.2.6. Multiclass and multilabel settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/01_metrics.html#id1">1.1.2.7. Summary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="content/01_how_well/02_cross_validation.html">1.2. Cross-validation: some gotchas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#the-uncertainty-of-measured-accuracy">1.2.1. The uncertainty of measured accuracy</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#measuring-baselines-and-chance">1.2.2. Measuring baselines and chance</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#cross-validation-with-non-iid-data">1.2.3. Cross-validation with non iid data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#stock-market-time-series">1.2.3.1. Stock market: time series</a><ul>
<li class="toctree-l5"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#download-and-load-the-data">1.2.3.1.1. Download and load the data</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#school-grades-repeated-measures">1.2.3.2. School grades: repeated measures</a><ul>
<li class="toctree-l5"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#id1">1.2.3.2.1. Download and load the data</a></li>
<li class="toctree-l5"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#visualized-factor-of-grades">1.2.3.2.2. Visualized factor of grades</a></li>
<li class="toctree-l5"><a class="reference internal" href="content/01_how_well/02_cross_validation.html#predicting-grades-in-maths">1.2.3.2.3. Predicting grades in maths</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html">1.3. Underfit vs overfit: do I need more data, or more complex models?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#a-toy-problem-fitting-polynomes">1.3.1. A toy problem: fitting polynomes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#data-generation-model">1.3.1.1. Data generation model</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#polynomial-regression">1.3.1.2. Polynomial regression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#train-error-versus-test-error">1.3.2. Train error versus test error</a><ul>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#underfit-high-bias">1.3.2.1. Underfit: high bias</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#overfit-high-variance">1.3.2.2. Overfit: high variance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#validation-curve-varying-model-complexity">1.3.3. Validation curve varying model complexity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#generate-a-larger-dataset">1.3.3.1. Generate a larger dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#the-validation-curve-function">1.3.3.2. The validation_curve function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#learning-curves-varying-the-amount-of-data">1.3.4. Learning curves: varying the amount of data</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/01_how_well/03_underfit_vs_overfit.html#summary">1.3.5. Summary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="content/02_why/index.html">2. Understanding why a classifier predicts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html">2.1. Interpreting linear models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#data-on-wages">2.1.1. Data on wages</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#the-challenge-of-correlated-features">2.1.2. The challenge of correlated features</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#coefficients-of-a-linear-model">2.1.3. Coefficients of a linear model</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#the-effect-of-regularization">2.1.4. The effect of regularization</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#stability-to-gauge-significance">2.1.5. Stability to gauge significance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#with-the-lasso-estimator">2.1.5.1. With the lasso estimator</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#with-the-ridge-estimator">2.1.5.2. With the ridge estimator</a></li>
<li class="toctree-l4"><a class="reference internal" href="content/02_why/01_interpreting_linear_models.html#which-is-the-truth">2.1.5.3. Which is the truth?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="content/02_why/02_interpreting_random_forests.html">2.2. Interpreting random forests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/02_interpreting_random_forests.html#data-on-wages">2.2.1. Data on wages</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/02_interpreting_random_forests.html#feature-importance">2.2.2. Feature importance</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/02_interpreting_random_forests.html#meaning-and-caveats">2.2.3. Meaning and Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="content/02_why/03_partial_dep_plots.html">2.3. Partial dependency plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/03_partial_dep_plots.html#all-in-one-plotting-function">2.3.1. All-in-one plotting function</a></li>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/03_partial_dep_plots.html#lower-level-partial-dependence-function">2.3.2. Lower-level partial_dependence function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="content/02_why/04_black_box_interpretation.html">2.4. Black-box interpretation of models: LIME</a><ul>
<li class="toctree-l3"><a class="reference internal" href="content/02_why/04_black_box_interpretation.html#regression-on-tabular-data-factors-of-prices-of-houses">2.4.1. Regression on tabular data: factors of prices of houses</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="content/03_figures/index.html">3. Appendix: didactic figures</a></li>
</ul>
</div>
<p><div style="clear: both"></div></p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">



    <div class="script_container">
    <script>
    (function() {
	var cx = '004523248466141510607:hgv2yimrahw';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
	    '//cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
    })();
    </script>
    <gcse:search></gcse:search>
    </div>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="content/01_how_well/index.html" title="1. Measuring how well a model predicts"
             >next</a></li>
        <li class="nav-item nav-item-0"><a href="#">Tutorial</a> &#187;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>